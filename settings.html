<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="images/img1.png">
    <title>VitalAI | Settings</title>
    <link rel="stylesheet" href="settings.css">
    <link rel="stylesheet" href="contact.css">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="settings-page">

    <header class="main-header">
    <nav class="nav-container">
        <div class="logo">
            <a href="index.html" style="text-decoration: none; color: inherit;">
                ðŸ©º Vital<span>AI</span>
            </a>
        </div>

        <ul class="nav-links" id="nav-menu">
            <li><a href="index.html">Dashboard</a></li>
            <li><a href="history.html">History</a></li>
            <li><a href="settings.html" class="active-link">Settings</a></li>
            
            <li class="status-indicator-mobile">
                <div class="status-wrapper">
                    <span id="connection-dot"></span> 
                    <span id="status-text">System Active</span>
                </div>
            </li>
        </ul>

        <div class="header-controls">
            <div class="status-indicator desktop-only">
                <span id="connection-dot"></span>
                <span id="status-text">Active</span>
            </div>

            <button id="theme-toggle" aria-label="Toggle Theme" class="control-btn">
                <i data-lucide="sun" class="sun-icon"></i>
                <i data-lucide="moon" class="moon-icon"></i>
            </button>

            <button class="mobile-toggle control-btn" id="mobile-menu-btn" aria-label="Open Menu">
                <i data-lucide="menu" id="menu-icon"></i>
            </button>
        </div>
    </nav>
    </header>

    <main class="dashboard-container">
        <div class="settings-grid">
            <aside class="settings-nav">
                <ul>
                    <li class="tab-link active-tab" onclick="showSection('profile', this)"><i data-lucide="user"></i> Health Profile</li>
                    <li class="tab-link" onclick="showSection('alerts', this)"><i data-lucide="bell"></i> Alert Thresholds</li>
                    <li class="tab-link" onclick="showSection('device', this)"><i data-lucide="cpu"></i> Device Config</li>
                    <li class="tab-link" onclick="showSection('privacy', this)"><i data-lucide="shield-check"></i> Privacy</li>
                </ul>
            </aside>

            <section class="settings-content">
                
                <div id="profile" class="settings-section active">
                    <div class="card">
                        <h3>Health Profile</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="user-age">Age</label>
                                <input type="number" id="user-age" placeholder="e.g. 28">
                            </div>
                            <div class="form-group">
                                <label for="user-sex">Sex</label>
                                <select id="user-sex">
                                    <option value="Male">Male</option>
                                    <option value="Female">Female</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                        </div>
                        <button class="action-btn" id="save-profile" style="margin-top: 20px;">Save Profile</button>
                    </div>
                </div>

                <div id="alerts" class="settings-section">
                    <div class="card">
                        <h3>Vital Alerts</h3>
                        <div class="form-group">
                            <label>Max BPM Threshold: <span id="hr-label">150</span></label>
                            <input type="range" id="hr-threshold" min="100" max="220" value="150" class="slider" oninput="document.getElementById('hr-label').innerText = this.value">
                        </div>
                        <p style="font-size: 0.8rem; color: var(--text-secondary);">The AI will notify you if your heart rate exceeds this value during a scan.</p>
                    </div>
                </div>

                <div id="device" class="settings-section">
                    <div class="card">
                        <h3>Device Config</h3>
                        <div class="form-group">
                            <label>Connection Type</label>
                            <select><option>Camera Sensor (Built-in)</option><option>Bluetooth Wearable</option></select>
                        </div>
                        <button class="action-btn">Scan for External Devices</button>
                    </div>
                </div>

                <div id="privacy" class="settings-section">
                    <div class="card">
                        <h3>Privacy & Data</h3>
                        <p>All biometric data is stored locally in your browser and is never uploaded to a cloud server.</p>
                        <button class="action-btn" id="clear-data-btn" style="background: #ff4b4b; color: white; margin-top: 10px;">Clear All Local Data</button>
                    </div>
                </div>

            </section>
        </div>
    </main>

    <footer class="main-footer">
        <div class="footer-container">
            <div class="footer-section">
                <h4>About VitalAI</h4>
                <p>Real-time health monitoring using advanced AI computer vision. Track your vitals anytime, anywhere.</p>
            </div>
            <div class="footer-section">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="index.html">Dashboard</a></li>
                    <li><a href="history.html">History</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Support</h4>
                <p>Email: support@vitalai.io</p>
                <p>Address: 123 Wellness Ave, Healthy City</p>
            </div>
            <div class="footer-section">
                <h4>Follow Us On</h4>
                <div class="social-icons">
                    <a href="#"><i data-lucide="facebook"></i></a>
                    <a href="#"><i data-lucide="twitter"></i></a>
                    <a href="#"><i data-lucide="linkedin"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2026 HealthMonitor Inc. All rights reserved.</p>
        </div>
    </footer>

    <script>
    // --- 1. Initialize Icons ---
    lucide.createIcons();

    // --- 2. Section Switcher Logic ---
    function showSection(sectionId, element) {
        document.querySelectorAll('.settings-section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.tab-link').forEach(t => t.classList.remove('active-tab'));
        
        const target = document.getElementById(sectionId);
        if (target) target.classList.add('active');
        if (element) element.classList.add('active-tab');
    }

    // --- 3. Main Logic (Wait for DOM) ---
    document.addEventListener('DOMContentLoaded', () => {
        // --- A. Persistent Settings Logic ---
        const ageInput = document.getElementById('user-age');
        const sexInput = document.getElementById('user-sex');
        const saveBtn = document.getElementById('save-profile');
        const hrSlider = document.getElementById('hr-threshold');
        const hrLabel = document.getElementById('hr-label');
        const clearBtn = document.getElementById('clear-data-btn');

        // Load saved data
        if (ageInput) ageInput.value = localStorage.getItem('user_age') || "";
        if (sexInput) sexInput.value = localStorage.getItem('user_sex') || "Male";
        if (hrSlider) {
            const savedHR = localStorage.getItem('max_hr') || "150";
            hrSlider.value = savedHR;
            if (hrLabel) hrLabel.innerText = savedHR;
        }

        // Save Profile
        saveBtn?.addEventListener('click', () => {
            localStorage.setItem('user_age', ageInput.value);
            localStorage.setItem('user_sex', sexInput.value);
            
            saveBtn.innerText = "Profile Saved! âœ“";
            saveBtn.style.background = "#00ff88";
            saveBtn.style.color = "#000";
            
            setTimeout(() => {
                saveBtn.innerText = "Save Profile";
                saveBtn.style.background = ""; 
                saveBtn.style.color = "";
            }, 2000);
        });

        // Save Slider
        hrSlider?.addEventListener('change', () => {
            localStorage.setItem('max_hr', hrSlider.value);
        });

        // Clear Storage
        clearBtn?.addEventListener('click', () => {
            if(confirm("Warning: This will delete all settings and history. Continue?")) {
                localStorage.clear();
                window.location.reload();
            }
        });

        // --- B. Theme Logic ---
        const themeBtn = document.getElementById('theme-toggle');
        // Initial load
        if (localStorage.getItem('theme') === 'light') {
            document.body.classList.add('light-mode');
        }

        themeBtn?.addEventListener('click', () => {
            const isLight = document.body.classList.toggle('light-mode');
            localStorage.setItem('theme', isLight ? 'light' : 'dark');
        });

        // --- C. Consolidated Mobile Menu Logic ---
        const mobileBtn = document.getElementById('mobile-menu-btn');
        const navMenu = document.getElementById('nav-menu');

        if (mobileBtn && navMenu) {
            mobileBtn.addEventListener('click', (e) => {
                e.stopPropagation(); // Prevent event bubbling
                const isOpen = navMenu.classList.toggle('active');
                
                // Update Icon
                const icon = mobileBtn.querySelector('i');
                if (icon) {
                    icon.setAttribute('data-lucide', isOpen ? 'x' : 'menu');
                    lucide.createIcons(); 
                }
            });

            // Close menu when clicking outside or on a link
            document.addEventListener('click', (e) => {
                if (!navMenu.contains(e.target) && !mobileBtn.contains(e.target)) {
                    navMenu.classList.remove('active');
                    const icon = mobileBtn.querySelector('i');
                    if (icon) {
                        icon.setAttribute('data-lucide', 'menu');
                        lucide.createIcons();
                    }
                }
            });

            navMenu.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    navMenu.classList.remove('active');
                    const icon = mobileBtn.querySelector('i');
                    if (icon) {
                        icon.setAttribute('data-lucide', 'menu');
                        lucide.createIcons();
                    }
                });
            });
        }
    });
    </script>
</body>
</html>